<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[基于逻辑回归评分卡模型开发及实现.html]]></title>
    <url>%2Fxiaoyue.github.io%2F2019%2F08%2F08%2Fping%2F</url>
    <content type="text"><![CDATA[1 信用风险评级模型的类型1.1 信用风险计量体系的主体评级模型分类信用风险计量体系的主体评级模型可用四张卡来表示，分别为A卡、B卡、C卡和F卡。 A卡，又称申请评分卡(Applicationscore)，对新贷款申请进行筛选并判断其违约风险；严格来讲，预测该申请客户在未来一段时间发生违约的概率； B卡，又称行为评分卡(Behaviouralscore)，通常是客户贷中进行观测使用，在信用卡方向实践可以是调整额度、预警等等； C卡，又称催收评分卡(Collectionsscore)，通常是预测客户是否违约、或客户违约后还款的可能性； F卡，又称欺诈评分模型，对新贷款申请或交易为欺诈行为的概率进行预测； 1.2 行为评分卡和申请评分卡的区别 通常行为评分卡要比申请评分卡更为精确。因为行为评分卡在对账户状态进行预测时基于更多的数据要素(交易产生的)。 拒绝演绎技术，只在申请评分卡的开发过程中使用。 2 评分卡开发流程2.1 评分卡开发流程图1概括了典型的评分卡开发流程。该流程各个步骤的顺序可以根据具体情况的不同进行调整，也可以根据需要重复某些步骤。^1^ 图1：典型评分卡开发流程 对开发流程具体描述如下： 数据获取：在明确问题(如确定违约或正常的定义和评分卡的范围、开发和实施窗口等)的基础上，从数据渠道角度，获取企业内部或外部数据，其中，内部数据如用户的年龄，户籍，性别，收入，负债比，在本机构的借款和还款行为等,外部数据如征信数据和外部评分等第三方数据；从数据内容角度，获取如设备使用行为、社交网络行为、多头借贷行为和网贷交易行为等。 EDA与数据描述:主要是获取样本总体的大概情况，以便制定样本总体的数据预处理方法。描述样本总体情况的指标主要有缺失值情况、异常值情况、平均值、中位数、最大值、最小值、分布情况等。 数据预处理:主要工作包括数据清洗、缺失值处理、异常值处理、标签定义及特征衍生，主要是为了将获取的原始数据转化为可用作模型开发的格式化数据。 变量选择:主要是通过统计学的方法，筛选出对违约状态影响最显著的指标。 模型开发:主要包括变量分段、变量的WOE（证据权重）变换和逻辑回归估算三部分。 模型评估:主要是根据模型验证和主标尺设计的结果，评估模型的区分能力、预测能力、稳定性，并形成模型评估报告，得出模型是否可以使用的结论。 主标尺与模型验证:主要是开发某类主体的主标尺并进行模型的验证与校准。 模型实施:即模型的部署和应用。 监测与报告:主要工作是定期检测模型的使用情况，并关注和定期检验模型的区分能力与预测能力的变化及模型稳定性的变化，在出现模型可能不能满足业务需求的情况时，反馈至模型开发团队，及时进行模型更新或重新开发。 拒绝演绎:申请评分卡的模型开发过程中使用的数据实际上并不是从申请总体样本中随机选择的，而仅仅是从过去已经被接受的客户样本中选择的。因此，开发申请评分卡时将对被拒绝客户的状态进行推断并纳入模型开发数据集中，即拒绝推断过程。 2.2 信贷业务流程 图2：信贷业务流程 3 数据获取3.1 明确问题3.1.1 明确违约与正常定义 预测模型的基本原理是历史数据预测未来，申请评分卡的目的是预测申请人在未来一段时间发生违约的概率。 观察期是指在设定的观察日之前的一段时间(又称回溯)，表现期是指观察日之后的一段时间。对于评分卡而言，用观察期内申请人的信用历史及表现(X)，以及表现期内申请人的还款表现(Y)，通过模型拟合出X与Y之间的关系。注意，观察日是时间段，非时间点。 图3:观察期表现期 违约定义： (1)、根据业务经验定义： 如对不同账期进行预测，那么不同账期下的违约定义也就不同。 (2)、根据逾期率定义： MOB 0 1 2 3 4 5 6 7 8 9 all_count bad_count 逾期率 0 218269 78639 3232 0 0 0 0 0 2 2 300144 81875 0.27278571 59218 169811 20351 9020 0 16 8 8 2 6 258440 29411 0.11380202 556 4061 3775 17287 7 0 0 0 0 0 25686 17294 0.67328513 184 1233 586 1686 22226 446 0 0 0 2 26363 22674 0.86006904 1 20 5 0 233 13634 2803 8 0 0 16704 16445 0.98449475 0 2 2 0 0 211 14936 911 0 0 16062 15847 0.98661446 0 0 0 2 0 0 179 17223 9 8 17421 17240 0.98961027 0 8 0 0 8 0 8 1292 14262 4 15582 14266 0.91554368 2 2 0 0 0 0 2 4 98 12527 12635 12527 0.99145239 0 10 2 4 0 4 8 12 22 247 309 0 0.0000000 : 表1：MOB逾期率 根据表1和图4的MOB逾期率看，在M4账期逾期率达到98%，逾期率进入一个稳定期。故可将M4+记为违约。 3.1.2 表现期确定 进件月份 进件总数 1 2 3 4 5 6 7 8 9 10 11 12 201901 297 0 0 0 0.33 0.65 1.35 2.22 2.93 3.60 4.15 4.05 4.1 201902 282 0 0 0 0.20 0.69 1.54 1.98 2.58 3.18 4.16 4.15 4.3 201903 564 0 0 0 0.40 1.01 1.97 2.39 3.00 3.67 4.14 4.23 NA 201904 633 0 0 0 0.23 1.20 1.93 2.96 3.12 3.50 4.15 NA NA 201905 606 0 0 0 0.26 0.98 1.79 2.23 3.13 3.60 NA NA NA 201906 852 0 0 0 0.33 1.23 1.55 2.34 3.50 NA NA NA NA 201907 960 0 0 0 0.36 0.92 1.60 2.60 NA NA NA NA NA 201908 731 0 0 0 0.23 1.01 1.70 NA NA NA NA NA NA 201909 740 0 0 0 0.26 1.20 NA NA NA NA NA NA NA 201910 744 0 0 0 0.33 NA NA NA NA NA NA NA NA 201911 713 0 0 0 NA NA NA NA NA NA NA NA NA 201912 662 0 0 NA NA NA NA NA NA NA NA NA NA 总和坏件率 NA 0 0 0 0.35 0.89 1.50 2.20 3.10 3.50 4.15 4.18 4.2 : 表2：进件坏账率 表2最后一列4.3%表示，2019年2月开立的所有账户中，12个月后出现逾期120天以上的账户占样本的比重为4.3%.通过这样统计方法，并绘制样本总体的违约状态变化曲线，即可得到如图5所示的曲线。从图35所示的曲线中我们可以看出，在账户开立第10个月到第12个月时，客户的违约状态达到稳定状态，曲线变得非常平稳。此时，我们可以确定评分卡的表现时间窗口为10个月到12个月.所以，预测开户10-12个月后逾期M4+的概率。 3.2 数据获取一般地，观察期是预测期的3-5倍。以观察日为终点，向前回溯3年历史数据，作为原始数据，建立模型。 4 EDA与数据描述以互联网上经常被用来研究信用风险评级模型的加州大学机器学习数据库中的germancredit data为例，German credit data 的数据来自”klaR”包。 1234567891011121314151617#下载klaR包#install.packages(&apos;klaR&apos;)#加载klaR包library(klaR)## Loading required package: MASS## ## Attaching package: &apos;MASS&apos;## The following object is masked from &apos;package:dplyr&apos;:## ## select#获取GermanCredit数据集data(GermanCredit)#查看数据集View(GermanCredit) 4.1 缺失值处理4.1.1 缺失值识别与可视化 is.na()函数 complete.cases()函数 mice::md.pattern()函数 VIM::aggr()函数 VIM::matrixplot()函数 VIM::marginplot()函数 4.1.2 缺失值处理 直接删除含缺失值的样本数据 根据样本间的相似性填补缺失值 根据变量间的相关关系填补缺失值 4.2 异常值处理4.2.1 异常值检测 单变量离群值检测 多变量离群值检测 局部离群值因子检测 基于聚类方法的离群值检测 4.2.2 异常值处理 直接删除含有异常值的样本 异常值视为缺失值，交给缺失值处理方法处理 用平均值修正 不处理 由于GermanCredit数据属于已处理完毕的数据，所以，跳过缺失和异常值 4.3 查看分布情况 总体分布 1summary(GermanCredit) 单变量分布 12345#查看变量duration分布情况ggplot(data=GermanCredit,mapping = aes(x=duration,y=..count..))+ geom_histogram(fill=&apos;blue&apos;,color=&apos;grey60&apos;,size=0.2,alpha=0.2,binwidth = 5)+ ggtitle(&apos;duration分布情况&apos;)+ theme(plot.title = element_text(hjust = 0.5)) ![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAHgCAMAAABNUi8GAAABI1BMVEUAAAAAADoAAGYAOjoAOmYAOpAAZmYAZpAAZrYzMzM6AAA6ADo6AGY6OpA6kNtNTU1NTW5NTY5NbqtNjshmAABmADpmAGZmOgBmOpBmZrZmkLZmkNtmtrZmtv9uTU1uTW5uTY5ubo5ubqtuq+SOTU2OTW6OTY6Obk2ObquOyP+QOgCQOjqQOmaQZpCQkDqQkGaQkLaQtpCQtv+Q27aQ2/+ZmZmrbk2rbm6rjk2ryKur5OSr5P+2ZgC2Zjq2Zma2kJC2ttu2tv+225C22/+2/9u2//+8vO/Ijk3I///MzP/bkDrbkJDbtmbbtrbb2//b/9vb///kq27k///r6+v/tmb/tpD/trb/yI7/25D/27b/29v/5Kv//7b//8j//9v//+T///8XucRsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAATS0lEQVR4nO3dC1sbxxXG8cGtW0ISSBycNk3lpMZJC03TS8C9GDdNU9dYTRrsyjUpAvb7f4ru7EogWcPosJphDkf/93kSMFq9c2b9Y3WJTVxFiOK40gMQEosrPQAhsbjSAxASiys9ACGxuNIDEBKLKz0AIbG40gMsVU7/Pf3r4VeTN/6u/fivJ9c2zw2IKz3A8mR/vf6nN/WlgVufPOD2of/QvzUp9L/tL6YoL1Nc6QFuTE53VmM3H731pD6kJRY+4M2fHVaDaaD761O/am/s11/s+7UGK7vecJtbS3pddaUHuDGZA9Rf96JAG3PDn04e4FH7jC6kNdD9Ecf1l7tt57fftKsO1qvljCs9wI2JAGgsI4z90SW0lfijzebDqn/eOfxq3600LNfHjocfnP5tAFAyN/Xj7K1/1EDbS+Rp89lq33tqHoHX61/6D+3Nw832Abn+1TfNjT6nO72pjz7D95+0D+PtGr393uPdFu6tv3/YfvHlLkDJ3PQ9mh/+ZBroD9bc7cN++4jcmwDaPmms3TVf8zc2FWNgw81zav4Z6OD8srzfm3gOWr1s3X55CFAyL8PNlts0UH9pPN3xl8qjtdWL56D1DT1PuvnMf901r3fOfd79YtONzLnzrDZPAfZ77fXYq//xZ/4ZwdGH50dFn18Yjis9w]]></content>
      <categories>
        <category>评分卡</category>
      </categories>
      <tags>
        <tag>R语言</tag>
        <tag>评分卡</tag>
      </tags>
  </entry>
</search>
