<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[�����߼��ع����ֿ�ģ�Ϳ�����ʵ��.html]]></title>
    <url>%2Fxiaoyue.github.io%2F2019%2F08%2F08%2Fping%2F</url>
    <content type="text"><![CDATA[1 ���÷�������ģ�͵�����1.1 ���÷��ռ�����ϵ����������ģ�ͷ������÷��ռ�����ϵ����������ģ�Ϳ������ſ�����ʾ���ֱ�ΪA����B����C����F���� A�����ֳ��������ֿ�(Applicationscore)�����´����������ɸѡ���ж���ΥԼ���գ��ϸ�������Ԥ�������ͻ���δ��һ��ʱ�䷢��ΥԼ�ĸ��ʣ� B�����ֳ���Ϊ���ֿ�(Behaviouralscore)��ͨ���ǿͻ����н��й۲�ʹ�ã������ÿ�����ʵ�������ǵ�����ȡ�Ԥ���ȵȣ� C�����ֳƴ������ֿ�(Collectionsscore)��ͨ����Ԥ��ͻ��Ƿ�ΥԼ����ͻ�ΥԼ�󻹿�Ŀ����ԣ� F�����ֳ���թ����ģ�ͣ����´����������Ϊ��թ��Ϊ�ĸ��ʽ���Ԥ�⣻ 1.2 ��Ϊ���ֿ����������ֿ������� ͨ����Ϊ���ֿ�Ҫ���������ֿ���Ϊ��ȷ����Ϊ��Ϊ���ֿ��ڶ��˻�״̬����Ԥ��ʱ���ڸ��������Ҫ��(���ײ�����)�� �ܾ����＼����ֻ���������ֿ��Ŀ���������ʹ�á� 2 ���ֿ���������2.1 ���ֿ���������ͼ1�����˵��͵����ֿ��������̡������̸��������˳����Ը��ݾ�������Ĳ�ͬ���е�����Ҳ���Ը�����Ҫ�ظ�ĳЩ���衣^1^ ͼ1���������ֿ��������� �Կ������̾����������£� ���ݻ�ȡ������ȷ����(��ȷ��ΥԼ�������Ķ�������ֿ��ķ�Χ��������ʵʩ���ڵ�)�Ļ����ϣ������������Ƕȣ���ȡ��ҵ�ڲ����ⲿ���ݣ����У��ڲ��������û������䣬�������Ա����룬��ծ�ȣ��ڱ������Ľ��ͻ�����Ϊ��,�ⲿ�������������ݺ��ⲿ���ֵȵ��������ݣ����������ݽǶȣ���ȡ���豸ʹ����Ϊ���罻������Ϊ����ͷ�����Ϊ������������Ϊ�ȡ� EDA����������:��Ҫ�ǻ�ȡ��������Ĵ��������Ա��ƶ��������������Ԥ���������������������������ָ����Ҫ��ȱʧֵ������쳣ֵ�����ƽ��ֵ����λ�������ֵ����Сֵ���ֲ�����ȡ� ����Ԥ����:��Ҫ��������������ϴ��ȱʧֵ�������쳣ֵ��������ǩ���弰������������Ҫ��Ϊ�˽���ȡ��ԭʼ����ת��Ϊ������ģ�Ϳ����ĸ�ʽ�����ݡ� ����ѡ��:��Ҫ��ͨ��ͳ��ѧ�ķ�����ɸѡ����ΥԼ״̬Ӱ����������ָ�ꡣ ģ�Ϳ���:��Ҫ���������ֶΡ�������WOE��֤��Ȩ�أ��任���߼��ع���������֡� ģ������:��Ҫ�Ǹ���ģ����֤���������ƵĽ��������ģ�͵�����������Ԥ���������ȶ��ԣ����γ�ģ���������棬�ó�ģ���Ƿ����ʹ�õĽ��ۡ� �������ģ����֤:��Ҫ�ǿ���ĳ�����������߲�����ģ�͵���֤��У׼�� ģ��ʵʩ:��ģ�͵Ĳ����Ӧ�á� ����뱨��:��Ҫ�����Ƕ��ڼ��ģ�͵�ʹ�����������ע�Ͷ��ڼ���ģ�͵�����������Ԥ�������ı仯��ģ���ȶ��Եı仯���ڳ���ģ�Ϳ��ܲ�������ҵ����������ʱ��������ģ�Ϳ����Ŷӣ���ʱ����ģ�͸��»����¿����� �ܾ�����:�������ֿ���ģ�Ϳ���������ʹ�õ�����ʵ���ϲ����Ǵ������������������ѡ��ģ��������Ǵӹ�ȥ�Ѿ������ܵĿͻ�������ѡ��ġ���ˣ������������ֿ�ʱ���Ա��ܾ��ͻ���״̬�����ƶϲ�����ģ�Ϳ������ݼ��У����ܾ��ƶϹ��̡� 2.2 �Ŵ�ҵ������ ͼ2���Ŵ�ҵ������ 3 ���ݻ�ȡ3.1 ��ȷ����3.1.1 ��ȷΥԼ���������� Ԥ��ģ�͵Ļ���ԭ������ʷ����Ԥ��δ�����������ֿ���Ŀ����Ԥ����������δ��һ��ʱ�䷢��ΥԼ�ĸ��ʡ� �۲�����ָ���趨�Ĺ۲���֮ǰ��һ��ʱ��(�ֳƻ���)����������ָ�۲���֮���һ��ʱ�䡣�������ֿ����ԣ��ù۲����������˵�������ʷ������(X)���Լ��������������˵Ļ������(Y)��ͨ��ģ����ϳ�X��Y֮��Ĺ�ϵ��ע�⣬�۲�����ʱ��Σ���ʱ��㡣 ͼ3:�۲��ڱ����� ΥԼ���壺 (1)������ҵ���鶨�壺 ��Բ�ͬ���ڽ���Ԥ�⣬��ô��ͬ�����µ�ΥԼ����Ҳ�Ͳ�ͬ�� (2)�����������ʶ��壺 MOB 0 1 2 3 4 5 6 7 8 9 all_count bad_count ������ 0 218269 78639 3232 0 0 0 0 0 2 2 300144 81875 0.27278571 59218 169811 20351 9020 0 16 8 8 2 6 258440 29411 0.11380202 556 4061 3775 17287 7 0 0 0 0 0 25686 17294 0.67328513 184 1233 586 1686 22226 446 0 0 0 2 26363 22674 0.86006904 1 20 5 0 233 13634 2803 8 0 0 16704 16445 0.98449475 0 2 2 0 0 211 14936 911 0 0 16062 15847 0.98661446 0 0 0 2 0 0 179 17223 9 8 17421 17240 0.98961027 0 8 0 0 8 0 8 1292 14262 4 15582 14266 0.91554368 2 2 0 0 0 0 2 4 98 12527 12635 12527 0.99145239 0 10 2 4 0 4 8 12 22 247 309 0 0.0000000 : ��1��MOB������ ���ݱ�1��ͼ4��MOB�����ʿ�����M4���������ʴﵽ98%�������ʽ���һ���ȶ��ڡ��ʿɽ�M4+��ΪΥԼ�� 3.1.2 ������ȷ�� �����·� �������� 1 2 3 4 5 6 7 8 9 10 11 12 201901 297 0 0 0 0.33 0.65 1.35 2.22 2.93 3.60 4.15 4.05 4.1 201902 282 0 0 0 0.20 0.69 1.54 1.98 2.58 3.18 4.16 4.15 4.3 201903 564 0 0 0 0.40 1.01 1.97 2.39 3.00 3.67 4.14 4.23 NA 201904 633 0 0 0 0.23 1.20 1.93 2.96 3.12 3.50 4.15 NA NA 201905 606 0 0 0 0.26 0.98 1.79 2.23 3.13 3.60 NA NA NA 201906 852 0 0 0 0.33 1.23 1.55 2.34 3.50 NA NA NA NA 201907 960 0 0 0 0.36 0.92 1.60 2.60 NA NA NA NA NA 201908 731 0 0 0 0.23 1.01 1.70 NA NA NA NA NA NA 201909 740 0 0 0 0.26 1.20 NA NA NA NA NA NA NA 201910 744 0 0 0 0.33 NA NA NA NA NA NA NA NA 201911 713 0 0 0 NA NA NA NA NA NA NA NA NA 201912 662 0 0 NA NA NA NA NA NA NA NA NA NA �ܺͻ����� NA 0 0 0 0.35 0.89 1.50 2.20 3.10 3.50 4.15 4.18 4.2 : ��2������������ ��2���һ��4.3%��ʾ��2019��2�¿����������˻��У�12���º��������120�����ϵ��˻�ռ�����ı���Ϊ4.3%.ͨ������ͳ�Ʒ��������������������ΥԼ״̬�仯���ߣ����ɵõ���ͼ5��ʾ�����ߡ���ͼ35��ʾ�����������ǿ��Կ��������˻�������10���µ���12����ʱ���ͻ���ΥԼ״̬�ﵽ�ȶ�״̬�����߱�÷ǳ�ƽ�ȡ���ʱ�����ǿ���ȷ�����ֿ��ı���ʱ�䴰��Ϊ10���µ�12����.���ԣ�Ԥ�⿪��10-12���º�����M4+�ĸ��ʡ� 3.2 ���ݻ�ȡһ��أ��۲�����Ԥ���ڵ�3-5�����Թ۲���Ϊ�յ㣬��ǰ����3����ʷ���ݣ���Ϊԭʼ���ݣ�����ģ�͡� 4 EDA�����������Ի������Ͼ����������о����÷�������ģ�͵ļ��ݴ�ѧ����ѧϰ���ݿ��е�germancredit dataΪ����German credit data ���������ԡ�klaR������ 1234567891011121314151617#����klaR��#install.packages(&apos;klaR&apos;)#����klaR��library(klaR)## Loading required package: MASS## ## Attaching package: &apos;MASS&apos;## The following object is masked from &apos;package:dplyr&apos;:## ## select#��ȡGermanCredit���ݼ�data(GermanCredit)#�鿴���ݼ�View(GermanCredit) 4.1 ȱʧֵ����4.1.1 ȱʧֵʶ������ӻ� is.na()���� complete.cases()���� mice::md.pattern()���� VIM::aggr()���� VIM::matrixplot()���� VIM::marginplot()���� 4.1.2 ȱʧֵ���� ֱ��ɾ����ȱʧֵ���������� ������������������ȱʧֵ ���ݱ��������ع�ϵ�ȱʧֵ 4.2 �쳣ֵ����4.2.1 �쳣ֵ��� ��������Ⱥֵ��� �������Ⱥֵ��� �ֲ���Ⱥֵ���Ӽ�� ���ھ��෽������Ⱥֵ��� 4.2.2 �쳣ֵ���� ֱ��ɾ�������쳣ֵ������ �쳣ֵ��Ϊȱʧֵ������ȱʧֵ������������ ��ƽ��ֵ���� ������ ����GermanCredit���������Ѵ�����ϵ����ݣ����ԣ�����ȱʧ���쳣ֵ 4.3 �鿴�ֲ���� ����ֲ� 1summary(GermanCredit) �������ֲ� 12345#�鿴����duration�ֲ����ggplot(data=GermanCredit,mapping = aes(x=duration,y=..count..))+ geom_histogram(fill=&apos;blue&apos;,color=&apos;grey60&apos;,size=0.2,alpha=0.2,binwidth = 5)+ ggtitle(&apos;duration�ֲ����&apos;)+ theme(plot.title = element_text(hjust = 0.5)) �������Ƶ�ʷֲ�ֱ��ͼ�У� ���Կ���German CreditData�еĴ������ޣ�����40�������ڡ������������������ޣ�����6-10���µĶ��ڴ�� 12345#�鿴����amount�ֲ����ggplot(data=GermanCredit,mapping = aes(x=amount,y=..count..))+ geom_histogram(fill=&apos;blue&apos;,color=&apos;grey60&apos;,size=0.2,alpha=0.2,binwidth = 1000)+ ggtitle(&apos;amount�ֲ����&apos;)+ theme(plot.title = element_text(hjust = 0.5)) �ʹ�������ԣ�����������˽��������5000����֮�ڡ�����������1000-3000���˵�С�������ࡣ 12345#�鿴����credit_risk�ֲ����ggplot(data=GermanCredit,mapping = aes(x=credit_risk,y=..count..))+ geom_histogram(fill=&apos;blue&apos;,color=&apos;grey60&apos;,alpha=0.2,stat=&apos;count&apos;)+ ggtitle(&apos;credit_risk�ֲ����&apos;)+ theme(plot.title = element_text(hjust = 0.5)) ## Warning: Ignoring unknown parameters: binwidth, bins, pad ��ͼ�п��Կ��������ݼ���30%�������˱�����ΪΥԼ�Ļ��û�����ʣ��70%�������Ǻ��û��� 5 ����ѡ�� ^2^����ѡ���Ŀ�����ռ�������ָ����ɸѡ����ΥԼ״̬Ӱ������ָ�ꡣ 5.1 ����ѡ�� ��ʹ��Ԥ��ģ�� �мල ��Ϣֵ������ͳ����������ϵ�� �޼ල ����ԡ�������������ɷַ��� ʹ��Ԥ��ģ�� �мල �𲽻ع飨forward, backward, stepwise�� ���򻯣�AIC, BIC, lasso, ridge�� ����ģ�ͣ�RF, xgboost�� ������֤ 1234567#ʹ��scorecard��var_filter����,Ĭ��ɾ����Ϣֵ&lt;0.02��ȱʧ��&gt;95%����������&gt;95%�ı���dt_sel&lt;-var_filter(GermanCredit,&apos;credit_risk&apos;)## [INFO] filtering variables ...dim(GermanCredit)## [1] 1000 21dim(dt_sel)## [1] 1000 15 �˴���ģ����ʹ�û���IVֵ��var_filter������������ԭ����21����Ϊ15���� 5.2 ��ģ�����з�1234567891011##����ʧ��������Ҫ���д�����ʹ��SMOTE�㷨����R��ϡ���¼����г�������.�˴�����caret����createDataPartition(���ݷָ��)������##��������ֳ���ͬ������set.seed(1234)splitindex&lt;-createDataPartition(dt_sel$credit_risk,p=0.7,list = F) #��������к�#dataΪ��Ӧ������p��������ѵ�����ı�����list����FALSE�ǲ����б��������train&lt;-dt_sel[splitindex,] #����ѵ����test&lt;-dt_sel[-splitindex,] #���ɲ��Լ�dim(train)## [1] 700 15dim(test)## [1] 300 15 6 ģ�Ϳ���6.1 WOE����֤��Ȩ��(Weight ofEvidence,WOE)ת�����Խ�logistic�ع�ģ��ת��Ϊ��׼���ֿ���ʽ����ת�������ܹ���ģ�͵�Ӧ��������ҵ������ԣ�ͬʱ�ܽ��������ǩ֮��ķ����Թ�ϵת��Ϊ���Եġ�scorecard::woebin�����ṩ��tree��chimerge���ַ��䷽���� 123456#woebin�����ݼ�����woebins&lt;-woebin(dt_sel,y=&apos;credit_risk&apos;,method = &apos;tree&apos;)## [INFO] creating woe binning ...class(bins)## [1] &quot;list&quot;bins$age 123#�������������Ϣͼwoebin_plot(bins$age)## $age һ��أ����ͻ��ʻ���WOEֵ�����ߣ���಻����һ���յ�(U�ͻ�U��)������ǵ�����ÿ���������������ռ����ô���5%�� �������ͼ��ʾ��ÿ���������������������5%�������ͻ��ʳ�W�ͣ���Ҫ�ֶ��������䡣 12345678910# �ֶ������������break_adj&lt;-list(age=c(26,35,40))# �ֶ������������bins_adj&lt;-woebin(dt_sel, y=&quot;credit_risk&quot;, breaks_list=break_adj, print_step=0)## [INFO] creating woe binning ...## Warning in check_breaks_list(breaks_list, xs): There are 13 x variables## that donot specified in breaks_list are using optimal binning.# �ػ����������Ϣͼwoebin_plot(bins_adj$age)## $age 6.2 woeת��woeת����ÿ������ȡֵ���Ӧ��woeֵ����ƥ�䣬����һ���±��� 12345678#ѵ����woeת��train_woe&lt;-woebin_ply(train,bins_adj)## [INFO] converting into woe values ...#���Լ�woeת��test_woe&lt;-woebin_ply(test,bins_adj)## [INFO] converting into woe values ...#�鿴�����ɵ�ѵ����head(train_woe) 6.3 �߼��ع�6.3.1 �߼��ع��߼��ع�(logistic regression)���������ֿ��������𵽺������á��߼��ع�ͨ��sigmoid���� $y=1/(1+e^{-z})$ �����Իع�ģ�� $z=\boldsymbol{w}^T\boldsymbol{x}+b$ ������Ԥ��ֵת��Ϊһ���ӽ�0��1�����ֵ�� \begin{eqnarray} h(x)&=&\frac{1}{1+e^{-z}} \\&=&\frac{1}{1+e^{-(\boldsymbol{w}^T\boldsymbol{x}+b)}} \end{eqnarray} ��ʽ�� $h(x)$ ����Ϊ�¼������ĸ��� $p(y=1|\boldsymbol{x})$ ���任��õ��� \ln\frac{p}{1-p}=z=\boldsymbol{w}^T\boldsymbol{x}+b���У� $p/(1-p)$ Ϊ����(odds)����ΥԼ�������������ʵı�ֵ�� $\ln{p/(1-p)}$ Ϊlogit�����������ʵ���Ȼ��������ˣ��߼��ع�ʵ�������ñ��ʵ���Ȼ������Ϊ����������Իع�ģ�͡� 6.3.2 �߼��ع���ۺ���(cost function)ͨ�������Ȼ���ƣ��õ���Ȼ����: \ell(\boldsymbol{w},b)=\sum_i{[y^{(i)}\ln{h(x)^{(i)}}+(1-y^{(i)})\ln{(1-h(x)^{(i)})}]}�����ʽ�ȼ��ڣ���С�����ۺ���(cost function): \begin{eqnarray} J(\boldsymbol{w},b)&=&-\frac{1}{m}\sum_i{\ell(\boldsymbol{w},b)} \\&=&-\frac{1}{m}\sum_i{[y^{(i)}\ln{h(x)^{(i)}}+(1-y^{(i)})\ln{(1-h(x)^{(i)})}]} \end{eqnarray}����, $h(x)$ Ϊ���ֵ, $y$ Ϊʵ�ʱ�ǩ, $m$ Ϊ��������ʹ���ݶ��½�(gradient descent), �ҵ����ʵĲ��� $(\boldsymbol{w}, b)$ , ʹ�� $J(\boldsymbol{w},b)$ ������С: \begin{eqnarray} &&\min{J(\boldsymbol{w},b)}: \\ &&repeat\{ \\ && \boldsymbol{w} := \boldsymbol{w} - \alpha\frac{dJ}{dw} \\ &&\} \end{eqnarray}6.3.3 ����(regulation)��ʹ�ô��ۺ�����Сʱ�����䵱���������ܶ�ʱ�����������������⡣Ϊ�˸��ƹ���ϣ�ͨ���ڴ��ۺ�������������� \min{J(\boldsymbol{w},b)}+\frac{\lambda}{m}(\alpha||\boldsymbol{w}||_1+\frac{1}{2}(1-\alpha)||\boldsymbol{w}||_2^2)���У����򻯲��� $\lambda&gt;0$ ; $||\boldsymbol{w}||_1=\sum_j{|w_j|}$ �� $||\boldsymbol{w}||_2^2=\sum_j{w_j^2}=\boldsymbol{w}^T\boldsymbol{w}$ �ֱ�ΪL1��L2�������򻯣�Ҳ�ֱ��ΪLASSO(Least Absolute Shrinkage and Selection Operator)��”��ع�”(ridge regression)��L1��L2�������򻯶������ڽ��͹���Ϸ��գ���ǰ�߸����ڻ��ϡ��⣬����õ� $\boldsymbol{w}$ ���и��ٵķ�������� 6.3.4 ����AICɸѡ����step123456789101112131415161718192021222324# �߼��ع�m1&lt;-glm( credit_risk ~ ., family = &quot;binomial&quot;, data = train_woe)# summary(m1)# ����AICɸѡ����stepm_step&lt;-step(m1, direction=&quot;both&quot;, trace = FALSE)m2&lt;-eval(m_step$call)coefficients&lt;-m2$coefficientscoefficients# (Intercept) status_woe # -0.8893727 0.8699409 # duration_woe credit_history_woe # 0.6539944 0.8902985 # purpose_woe amount_woe # 1.1579628 1.2183788 # savings_woe employment_duration_woe # 0.9256609 0.5346631 # installment_rate_woe personal_status_sex_woe # 2.1857340 0.7922848 # other_debtors_woe age_woe # 2.4504925 0.7679847 # other_installment_plans_woe housing_woe # 0.9097653 0.9852162##�����ع�����vif(m2) vifȡֵ��(0,10)�����ڶ��ع�����,(10,100)���ڶ��ع�����,(>100)�������ض��ع����ԡ��ɴˣ������ڶ��ع��������⡣ 7 ģ������7.1 ѵ��������123456#ѵ����Ԥ�����train_pred&lt;-predict(m2,,type=&apos;response&apos;,train_woe)## Warning in if (!se.fit) &#123;: �����ĳ��ȴ���һ�����ֻ�������һԪ��#ģ������perf_train&lt;-perf_eva( train_pred,train_woe$credit_risk,title=&quot;train&quot;)## [INFO] The threshold of confusion matrix is 0.3026. 123456#�鿴Ч��perf_train$pic## TableGrob (1 x 2) &quot;arrange&quot;: 2 grobs## z cells name grob## 1 1 (1-1,1-1) arrange gtable[layout]## 2 2 (1-1,2-2) arrange gtable[layout] 7.2 ���Լ�����12345#���Լ�Ԥ�����test_pred&lt;-predict(m2, type=&apos;response&apos;, test_woe)#ģ������perf_test&lt;-perf_eva(test_pred,test_woe$credit_risk,title=&quot;test&quot;)## [INFO] The threshold of confusion matrix is 0.3059. 123456#�鿴Ч��perf_test$pic## TableGrob (1 x 2) &quot;arrange&quot;: 2 grobs## z cells name grob## 1 1 (1-1,1-1) arrange gtable[layout]## 2 2 (1-1,2-2) arrange gtable[layout] ks ���Լ���ks��0.43������ģ�ͶԺû��ͻ�������������ǿ�� 8 ���̶ֿ���ʵʩ8.1 ����AB���� ��������һ���û���ΥԼ����Ϊ$p$,����������Ϊ$1-p$,�� odds=\frac{p}{1-p} ��$odds$��ʾһ���û�ΥԼ�������������ʵı��ʡ�һ��ı�����ʽ��$1:240$,$1:480$�ȡ������$odds$���ʷ�������ʵ˵�ľ��Ǵ˴���ĸ��Ϊ$1/2$�� �������ǶȽ��Ϊ241�ˣ�1��ΥԼ��240������,481�ˣ�1��ΥԼ��480������; �ӱ��ʽǶȣ���$1:240$�ȼ���0.42%,$1:480$�ȼ���0.21%�������Ϸ�ĸ�ķ�������ζ�ű�����ΥԼ���ʵĽ��͡� ���ֿ���ֵ�̶�,����ֵ��ʾΪ���ʶ��������Ա���ʽ�� score = A - B\ln(odds)���У�$A$��$B$Ϊ������ʽ�и���ʹ��ΥԼ����Խ�ͣ��÷�Խ�ߡ� ����������÷�Խ�ߣ�$odds$��ĸԽ��ΥԼ����Խ�͡���ҵ��ǶȽ����߷�ֵ�����ͷ��գ��ͷ�ֵ�����߷��ա� �߼��ع�ģ�ͼ���$odds$���£� \ln(odds)=\boldsymbol{w}^T\boldsymbol{x}+b���У�(\ln(odds)) Ϊ�߼��ع��������� ���ֿ���ֵ$A$,$B$�������� һ�����ֿ��������Ϊ���ֽ���20�֣�ΥԼ�������һ��������ĸ��Ϊ$1/2$����÷�600�ֵ�$odds$Ϊ$1:240$�ȼ���ΥԼ����0.42%,�÷�620�ֵ�$odds$Ϊ$1:480$�ȼ���ΥԼ����0.21% $A$,$B$�����ļ�����ͨ����������֪���߼���ķ�ֵ����$score = A - B\ln(odds)$�еõ���ͨ������Ҫ�������裺 ��ĳ���ض��ı����趨�ض���Ԥ�ڷ�ֵ$P_0$ ָ�����ʷ����ķ���$PDO$ ���ȣ��趨$odds$����$\theta_0$���ض���ķ�ֵΪ$P_0$,Ȼ��$odds$����Ϊ$2\theta_0$�ĵ�ķ�ֵΪ$P_0+PDO$,����$score = A - B\ln(odds)$���ɵ�����������ʽ: P_0=A-Bln(\theta_0)P_0+PDO=A-Bln(2\theta_0)��Σ�������Ԫ�����������������еĳ���$A$,$B$�����Կ���: B=\frac{PDO}{ln(2)}A=P_0+Bln(\theta_0)��󣬼����趨���ֿ��̶ȣ�ʹ��$odds$����Ϊ$1:60$(ΥԼ������)ʱ�ķ�ֵΪ600�֣�PDO=20�����������������̣� 12345678910111213alpha_beta&lt;-function(basepoints,baseodds,pdo)&#123; B&lt;-pdo/log(2) A&lt;-basepoints+B*log(baseodds) return(list(A=A,B=B))&#125;x&lt;-alpha_beta(600,1/60,20)x## $A## [1] 481.8622## ## $B## [1] 28.8539 ���$A=481.8622$,$B=28.8539$������$score = A - B\ln(odds)$Ϊ: score = 481.86-28.85\ln(odds)8.2 ��ֵ�������߼��ع鹫ʽ�������ֿ���ֵ��ʽ�����Եõ� \begin{eqnarray} score &=& A-B\ln(odds) = A-B(\boldsymbol{w}^T\boldsymbol{x}+b) \\ &=& (A-Bb) - Bw_1x_1 - Bw_2x_2 \cdots - Bw_mx_m \end{eqnarray}���У� $x_1\cdots x_m$ Ϊ���ս���ģ�͵��Ա������Ѿ�ת��ΪWOEֵ, $w_i$ Ϊ�߼��ع�ı���ϵ��, $b$ Ϊ�߼��ع�Ľؾ�, $A, B$ Ϊ��ҳ��õĿ̶����ӡ� $Bw_ix_i$ Ϊ���� $x_i$ ��Ӧ�����֣� $(A-Bb)$ Ϊ������(Ҳ�ɽ�������ֵƽ���������������)�� 123#�������ֿ��̶�card&lt;-scorecard(bins_adj,m2)data.table::rbindlist(card,fill = TRUE)[c(1,37:40),1:4] 123456789101112131415161718192021222324252627#����ת��ֻ��һ���������ܷ�train_score&lt;-scorecard_ply(train,card,only_total_score = TRUE,print_step = 0)test_score&lt;-scorecard_ply(test,card,only_total_score = TRUE,print_step = 0)str(test_score)## Classes &apos;data.table&apos; and &apos;data.frame&apos;: 300 obs. of 1 variable:## $ score: num 319 438 692 399 305 665 585 485 381 476 ...## - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;#����ת�������ֺܷ͸������ķ�ֵtrain_score1&lt;-scorecard_ply(train,card,only_total_score = FALSE,print_step = 0)test_score1&lt;-scorecard_ply(test,card,only_total_score = FALSE,print_step = 0)str(test_score1)## Classes &apos;data.table&apos; and &apos;data.frame&apos;: 300 obs. of 14 variables:## $ status_points : num -39 -39 74 -39 -39 74 -39 -39 -39 -39 ...## $ duration_points : num -5 -25 16 -5 -5 -5 16 62 -5 -5 ...## $ credit_history_points : num -5 -6 -6 -6 -79 -6 47 -6 -6 47 ...## $ purpose_points : num -30 65 34 34 -12 34 65 -10 -30 65 ...## $ amount_points : num -34 -34 23 -3 -34 23 23 -3 -34 -34 ...## $ savings_points : num -18 -18 51 -9 51 51 -9 -18 -9 -9 ...## $ employment_duration_points : num -1 -1 15 -1 -17 9 -17 -1 -1 15 ...## $ installment_rate_points : num 10 30 30 -25 30 10 10 30 30 30 ...## $ personal_status_sex_points : num 9 9 -25 -13 9 9 9 9 9 9 ...## $ other_debtors_points : num -5 -5 -5 -5 -5 -5 -5 -5 -5 -5 ...## $ age_points : num 11 31 11 -3 -29 -3 11 31 -3 -29 ...## $ other_installment_plans_points: num 8 8 8 8 -31 8 8 -31 8 8 ...## $ housing_points : num -34 -29 14 14 14 14 14 14 14 -29 ...## $ score : num 319 438 692 399 305 665 585 485 381 476 ...## - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 9 ģ���ȶ��Լ���ȶ���ָ��(population stability index, PSI)�Ǽ���ʵ�ʺ�Ԥ�ڵķ�ֵ�ֲ�֮������һ������ָ��,$PSI=\sum_i{(A_i-E_i)\ln(A_i/E_i)}$ ���������̼��±�: psi 12345678psi&lt;-perf_psi( score = list(train = train_score, test = test_score), label = list(train = train$credit_risk, test = test$credit_risk), x_limits = c(250, 700), x_tick_break = 50, return_distr_dat = TRUE)psi$pic## $score 1psi$psi 10 �ܾ��ƶ� �������ֿ���ģ�Ϳ���������ʹ�õ�����ʵ���ϲ����Ǵ������������������ѡ��ģ��������Ǵӹ�ȥ�Ѿ������ܵĿͻ�������ѡ��ġ���ˣ������������ֿ�ʱ���Ա��ܾ��ͻ���״̬�����ƶϲ�����ģ�Ϳ������ݼ��У����ܾ��ƶϹ��̡� �ܾ��ƶϵĳ��÷��������� �򵥸�ֵ������Ϊָ�����ܾ��˻��ı�ǩ ���Ա��ܾ����� ���б������븳ֵΪΥԼ��ǩ ��������ֵ��ʹ���仵�ͻ�����ͨ��������2~5������ ǿ������ͨ�����Ʒ�ȷ���ܾ��˻��ı�ǩ ��ǿ������ʹ��ͨ���ͻ�������ģ�ͶԱ��ܾ��ͻ����֣������еͷֶθ���ΥԼ��ǩ��ʹ�þܾ��ͻ��Ļ��ͻ���Ϊͨ����2~5������ ģ��ǿ������ͨ��ģ�ͼ���õ�������ΥԼ���ʡ� ���ǿ���������ÿ��������ֿ��Ա��ܿͻ����֣�Ȼ��ָ��ÿ����ֵ�����ΥԼ�ͻ�������]]></content>
      <categories>
        <category>���ֿ�</category>
      </categories>
      <tags>
        <tag>R����</tag>
        <tag>���ֿ�</tag>
      </tags>
  </entry>
</search>
